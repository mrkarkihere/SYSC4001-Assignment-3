note to self:
- do error checking for queues when they return -1 as index
- do something about the usleep(100) inside main()
- i feel like there's logic gaps somewhere